<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>hw-03</title>
    <script src="https://d3js.org/d3.v3.min.js"></script>
</head>
<body>
 <h1>HW-03</h1>
 <h3>製作長條圖 2016年8⽉&&台北市&&發票金額>10億元的項⽬</h3>
 <br>
  <svg width="800" height="250">  
  </svg>
   <hr>
   <h3>綁定資料到多個視覺元素/把數字小於70改紅⾊</h3>
   
   <script>
       d3.json("invoice2016.json", function(dataSet){
           var svg = d3.select("svg");
           var count = 0;
           for(var i=0; i<dataSet.length; i++){
               var item = dataSet[i];
                if(item.amount>1000000000 && item.date==='2016/8/1' && item.cid === "A"){
                      d3.select("svg")
                        .append("rect")
                        .attr({
                        x: 240,
                        y: 10+18*count,
                        width: item.amount/100000000,
                        height: 15,
                        fill: "red"
                      });
                      d3.select("svg")
                        .append("text")
                        .attr({
                        x: 0,
                        y: 25+18*count,
                        "font-size": 15
                      }).text(item.industry);
                      count++;
                 }
                
            }
       });
   </script>
   <script>
       var arr = [85, 60, 99, 49, 77, 82];
       bind(arr);
       render();
       
       function bind(data){
            var selection = d3.select("body")
                              .selectAll("div")
                              .data(arr);
            selection.enter().append("div");
            selection.exit().remove();
       }
       
       function render(){
            d3.selectAll("div")
              .style({
                "font-size":14,
                color:function(d){
                    if(d<70){
                        return "red";
                    }    
                }
               })
              .text(function(d,i){
                return (i+1)+':'+ d;
               });
       }
   </script>
</body>
</html>